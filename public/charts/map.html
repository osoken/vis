<!DOCTYPE html>
<meta charset="utf-8">
<script src="/javascripts/vendor/d3.min.js"></script>
<script src="/javascripts/vendor/topojson.min.js"></script>

<body>

<script>
var width = 960;
var height = 500;

var svg = d3.select('body').append('svg')
  .attr('width', width)
  .attr('height', height);

var geoLayer = svg.append('g');

var zoom = d3.behavior.zoom()
  .on('zoom', function()
  {
    projection.translate(zoom.translate()).scale(zoom.scale());
    geoLayer.selectAll('path').attr('d', path);
  });

svg.call(zoom);

zoom.translate([width/2,height/2]).scale(20000);

var projection = d3.geo.mercator()
  .center([139.4452884,35.7106589])
  .scale(zoom.scale())
  .translate(zoom.translate());
var path = d3.geo.path().projection(projection);


d3.json('/data/geo/tokyo.topojson',function(error,data)
{
  if (error)
  {
    return;
  }
  var features = topojson.feature(data, data.objects.tokyo).features;
  geoLayer.selectAll('path')
    .data(features)
    .enter().append('path')
    .attr("fill", '#ccc')
    .attr('stroke', '#888')
    .attr('stroke-width', '1.2px')
    .attr('d', path)
});
</script>
